{"version":3,"sources":["webpack:///node_modules/@ionic-native/photo-viewer/__ivy_ngcc__/ngx/index.js","webpack:///src/app/conversation/conversation.page.html","webpack:///src/app/conversation/conversation-routing.module.ts","webpack:///src/app/conversation/conversation.module.ts","webpack:///src/app/conversation/conversation.page.scss","webpack:///src/app/conversation/conversation.page.ts"],"names":["PhotoViewer","_super","apply","arguments","prototype","show","url","title","options","pluginName","plugin","pluginRef","repo","platforms","ɵfac","PhotoViewer_Factory","t","ɵPhotoViewer_BaseFactory","ɵprov","token","factory","type","routes","path","component","ConversationPageRoutingModule","imports","forChild","exports","ConversationPageModule","providers","declarations","ConversationPage","camera","modalCtrl","actionSheetController","photoViewer","router","route","utilService","helperService","service","propertyList","contactInfo","name","domain","showOptions","oldMsgs","messages","image","currentLang","getLang","queryParams","subscribe","_res","chatTo","getChatHistory","gtAdvisorById","id","localStorage","getItem","myProfile","JSON","parse","self","chatServiceConnection","chatService","start","then","console","log","topicId","getTopicById","data","selectedCat","extra","window","atob","sendMessage","scanImageUrl","push","text","name_ar","status","createdOn","Date","setTimeout","removeItem","err","error","toString","on","message","Audio","play","username","fromUser","media","ScrollToBottom","infiniteScroll","disabled","advisorById","chatToObj","stringify","profilePic","chatStatus","payload","hide","forEach","_item","reverse","_itm","fromUsersId","usersId","cstatus","_id","banner","title_ar","myContent","scrollToBottom","files","me","file","reader","FileReader","readAsDataURL","onload","result","uploadImage","onerror","_base64","Payload","fileContent","uploadChatImage","_type","msg","replace","undefined","_msg","_url","_topic","send","invoke","create","header","buttons","handler","pickImage","PictureSourceType","PHOTOLIBRARY","CAMERA","role","actionSheet","present","sourceType","quality","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","allowEdit","getPicture","imageData","_image","share","closeButton","copyToReference","headers","piccasoOptions","decodeURIComponent","navigate","event","document","getElementsByClassName","length","target","complete","unshift","read","selector","template"],"mappings":"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","file":"conversation-conversation-module-es5.js","sourcesContent":["import { __extends } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { IonicNativePlugin, cordova } from '@ionic-native/core';\nimport * as ɵngcc0 from '@angular/core';\nvar PhotoViewer = /** @class */ (function (_super) {\n    __extends(PhotoViewer, _super);\n    function PhotoViewer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PhotoViewer.prototype.show = function (url, title, options) { return cordova(this, \"show\", { \"sync\": true }, arguments); };\n    PhotoViewer.pluginName = \"PhotoViewer\";\n    PhotoViewer.plugin = \"com-sarriaroman-photoviewer\";\n    PhotoViewer.pluginRef = \"PhotoViewer\";\n    PhotoViewer.repo = \"https://github.com/sarriaroman/photoviewer\";\n    PhotoViewer.platforms = [\"Android\", \"iOS\"];\nPhotoViewer.ɵfac = function PhotoViewer_Factory(t) { return ɵPhotoViewer_BaseFactory(t || PhotoViewer); };\nPhotoViewer.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: PhotoViewer, factory: function (t) { return PhotoViewer.ɵfac(t); } });\nvar ɵPhotoViewer_BaseFactory = /*@__PURE__*/ ɵngcc0.ɵɵgetInheritedFactory(PhotoViewer);\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PhotoViewer, [{\n        type: Injectable\n    }], null, null); })();\n    return PhotoViewer;\n}(IonicNativePlugin));\nexport { PhotoViewer };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9AaW9uaWMtbmF0aXZlL3BsdWdpbnMvcGhvdG8tdmlld2VyL25neC9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMzQyxPQUFPLDhCQUFzQyxNQUFNLG9CQUFvQixDQUFDOztBQUN4RTtBQUdRLElBb0R5QiwrQkFBaUI7QUFBQztBQUU5QjtBQUVSO0FBQU0sSUFJakIsMEJBQUksYUFBQyxHQUFXLEVBQUUsS0FBYyxFQUFFLE9BQTRCO0FBRVg7QUFBNEM7QUFBd0Q7QUFBMkM7QUFBcUU7K0NBWHhRLFVBQVU7Ozs7OzBCQUNMO0FBQUMsc0JBekRQO0FBQUUsRUF5RCtCLGlCQUFpQjtBQUNqRCxTQURZLFdBQVc7QUFBSSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvcmRvdmEsIElvbmljTmF0aXZlUGx1Z2luLCBQbHVnaW4gfSBmcm9tICdAaW9uaWMtbmF0aXZlL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBob3RvVmlld2VyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBTZXQgdG8gZmFsc2UgdG8gZGlzYWJsZSB0aGUgc2hhcmUgYnV0dG9uIChBbmRyb2lkIG9ubHkpLiBEZWZhdWx0OiB0cnVlXG4gICAqL1xuICBzaGFyZT86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBBZGQgSFRUUCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0LiAgVXNlZnVsIGZvciBhdXRoZW50aWNhdGVkIHBhZ2VzLlxuICAgKiBUaGUgdmFsdWUgaXMgYSBzdHJpbmcgaW4gYSBKU09OIGZvcm1hdC4gIERlZmF1bHQ6ICcnXG4gICAqL1xuICBoZWFkZXJzPzogc3RyaW5nO1xuICAvKipcbiAgICogT3B0aW9uIGZvciBjbG9zZSBidXR0b24gdmlzaWJpbGl0eSB3aGVuIHNoYXJlIGZhbHNlIFtPTkxZIEZPUiBpT1NdXG4gICAqL1xuICBjbG9zZUJ1dHRvbj86IGJvb2xlYW47XG4gIC8qKlxuICAgKiBJZiB5b3UgbmVlZCB0byBjb3B5IGltYWdlIHRvIHJlZmVyZW5jZSBiZWZvcmUgc2hvdyB0aGVuIHNldCBpdCB0cnVlIFtPTkxZIEZPUiBpT1NdXG4gICAqL1xuICBjb3B5VG9SZWZlcmVuY2U/OiBib29sZWFuO1xuICAvKipcbiAgICogRW5hYmxlIG9yIERpc2FibGUgUGljYXNzbyBPcHRpb25zICggT25seSBBbmRyb2lkICk6IGZpdCwgY2VudGVySW5zaWRlLCBjZW50ZXJDcm9wLlxuICAgKi9cbiAgcGljY2Fzb09wdGlvbnM/OiB7XG4gICAgZml0PzogYm9vbGVhbjtcbiAgICBjZW50ZXJJbnNpZGU/OiBib29sZWFuO1xuICAgIGNlbnRlckNyb3A/OiBib29sZWFuO1xuICB9O1xufVxuXG4vKipcbiAqIEBuYW1lIFBob3RvIFZpZXdlclxuICogQGRlc2NyaXB0aW9uIFRoaXMgcGx1Z2luIGNhbiBkaXNwbGF5IHlvdXIgaW1hZ2UgaW4gZnVsbCBzY3JlZW4gd2l0aCB0aGUgYWJpbGl0eSB0byBwYW4sIHpvb20sIGFuZCBzaGFyZSB0aGUgaW1hZ2UuXG4gKiBAdXNhZ2VcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IFBob3RvVmlld2VyIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9waG90by12aWV3ZXIvbmd4JztcbiAqXG4gKiBjb25zdHJ1Y3Rvcihwcml2YXRlIHBob3RvVmlld2VyOiBQaG90b1ZpZXdlcikgeyB9XG4gKlxuICogLi4uXG4gKlxuICogdGhpcy5waG90b1ZpZXdlci5zaG93KCdodHRwczovL215c2l0ZS5jb20vcGF0aC90by9pbWFnZS5qcGcnKTtcbiAqXG4gKiB0aGlzLnBob3RvVmlld2VyLnNob3coJ2h0dHBzOi8vbXlzaXRlLmNvbS9wYXRoL3RvL2ltYWdlLmpwZycsICdNeSBpbWFnZSB0aXRsZScsIHtzaGFyZTogZmFsc2V9KTtcbiAqXG4gKiB0aGlzLnBob3RvVmlld2VyLnNob3coJ2h0dHBzOi8vbXlzZWN1cmVzaXRlLmNvbS9wYXRoL3RvL2ltYWdlLmpwZycsICdNeSBpbWFnZSB0aXRsZScsIHtzaGFyZTogZmFsc2UsIGhlYWRlcnM6ICd7dXNlcm5hbWU6Zm9vLHBhc3N3b3JkOmJhcn0nfSk7XG4gKiBgYGBcbiAqL1xuQFBsdWdpbih7XG4gIHBsdWdpbk5hbWU6ICdQaG90b1ZpZXdlcicsXG4gIHBsdWdpbjogJ2NvbS1zYXJyaWFyb21hbi1waG90b3ZpZXdlcicsXG4gIHBsdWdpblJlZjogJ1Bob3RvVmlld2VyJyxcbiAgcmVwbzogJ2h0dHBzOi8vZ2l0aHViLmNvbS9zYXJyaWFyb21hbi9waG90b3ZpZXdlcicsXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBQaG90b1ZpZXdlciBleHRlbmRzIElvbmljTmF0aXZlUGx1Z2luIHtcbiAgLyoqXG4gICAqIFNob3dzIGFuIGltYWdlIGluIGZ1bGwgc2NyZWVuXG4gICAqIEBwYXJhbSB1cmwge3N0cmluZ30gVVJMIG9yIHBhdGggdG8gaW1hZ2VcbiAgICogQHBhcmFtIHRpdGxlIHtzdHJpbmd9XG4gICAqIEBwYXJhbSBvcHRpb25zIHtQaG90b1ZpZXdlck9wdGlvbnN9XG4gICAqL1xuICBAQ29yZG92YSh7IHN5bmM6IHRydWUgfSlcbiAgc2hvdyh1cmw6IHN0cmluZywgdGl0bGU/OiBzdHJpbmcsIG9wdGlvbnM/OiBQaG90b1ZpZXdlck9wdGlvbnMpOiB2b2lkIHt9XG59XG4iXX0=","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button color=\\\"dark\\\" text=\\\"\\\" defaultHref=\\\"/tabs/chat\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-avatar slot=\\\"start\\\" class=\\\"contact-avatar\\\">\\n      <img [src]=\\\"chatTo?.profilePic\\\" onError=\\\"this.src='./assets/user.svg'\\\">\\n    </ion-avatar>\\n    <ion-title class=\\\"lang-{{currentLang}}\\\">\\n      <ion-label>\\n        <h2>{{ chatTo.name }}</h2>\\n        <small>{{ chatTo.isOnline }}</small>\\n      </ion-label>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content class=\\\"ion-padding-bottom\\\">\\n  <ion-infinite-scroll threshold=\\\"100px\\\" position=\\\"top\\\" (ionInfinite)=\\\"loadData($event)\\\">\\n    <ion-infinite-scroll-content disabled=\\\"true\\\" loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Loading chat...\\\">\\n    </ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n  <div class=\\\"chat-container\\\">\\n    <div *ngFor=\\\"let item of oldMsgs\\\">\\n      <div *ngFor=\\\"let message of item; let i=index\\\" class=\\\"chat-bubble old-bubble\\\"\\n        [ngClass]=\\\"[message.cstatus, message.media.type]\\\">\\n        <img [src]=\\\"path + message.media.url\\\" onError=\\\"this.src='./assets/no-image.svg'\\\" *ngIf=\\\"message.media.type == 'image'\\\"\\n          (click)=\\\"showPreview(path + message.media.url)\\\" />\\n        <h6 *ngIf=\\\"message.media.type == 'text' || message.media.type == 'image'\\\">{{ message.message }}</h6>\\n        <div class=\\\"topic-details\\\" *ngIf=\\\"message.media.type == 'topic'\\\">\\n          <div class=\\\"topic-image\\\">\\n            <img [src]=\\\"path + message.media.topics.banner\\\" onError=\\\"this.src='./assets/no-image.svg'\\\">\\n          </div>\\n          <div class=\\\"topic-content\\\">\\n            <h6>{{ currentLang == 'en' ? message.media.topics.title : message.media.topics.title_ar }}</h6>\\n          </div>\\n        </div>\\n        <p>{{ message.createdOn | date: 'EEE MMM, yyyy hh:mm a' }}</p>\\n      </div>\\n    </div>\\n    <div *ngFor=\\\"let message of messages; let i=index\\\" class=\\\"chat-bubble\\\" [ngClass]=\\\"[message.status, message.type]\\\">\\n      <img [src]=\\\"path + message.url\\\" onError=\\\"this.src='./assets/no-image.svg'\\\" *ngIf=\\\"message.type == 'image'\\\" (click)=\\\"showPreview(path + message.url)\\\" />\\n      <h6 *ngIf=\\\"message.type == 'text' || message.type == 'image'\\\">{{ message.text }}</h6>\\n      <div class=\\\"topic-details\\\" *ngIf=\\\"message.type == 'topic'\\\">\\n        <div class=\\\"topic-image\\\">\\n          <img [src]=\\\"path + message.url\\\" onError=\\\"this.src='./assets/no-image.svg'\\\">\\n        </div>\\n        <div class=\\\"topic-content\\\">\\n          <h6>{{ message.text }}</h6>\\n        </div>\\n      </div>\\n      <p>{{ message.createdOn | date: 'EEE MMM, yyyy hh:mm a' }}</p>\\n    </div>\\n  </div>\\n  <!-- <input type=\\\"file\\\" name=\\\"uploadImage\\\" id=\\\"uploadImage\\\" (change)=\\\"upload($event.target.files)\\\"> -->\\n</ion-content>\\n<ion-footer>\\n  <div class=\\\"chat-controls\\\">\\n    <ion-row class=\\\"bg-white ion-align-items-center footer\\\">\\n      <ion-col size=\\\"2\\\" class=\\\"ion-no-padding\\\">\\n        <p class=\\\"ion-text-center icon-controls\\\">\\n          <ion-icon mode=\\\"ios\\\" name=\\\"add\\\" *ngIf=\\\"!showOptions\\\" (click)=\\\"selectImage()\\\"></ion-icon>\\n          <ion-icon mode=\\\"ios\\\" color=\\\"danger\\\" name=\\\"close\\\" *ngIf=\\\"showOptions\\\"></ion-icon>\\n        </p>\\n      </ion-col>\\n      <ion-col size=\\\"8\\\" class=\\\"ion-no-padding\\\">\\n        <ion-list lines=\\\"none\\\" class=\\\"ion-no-padding\\\">\\n          <ion-item>\\n            <ion-input placeholder=\\\"Type your message\\\" type=\\\"text\\\" [(ngModel)]=\\\"message\\\"></ion-input>\\n          </ion-item>\\n        </ion-list>\\n      </ion-col>\\n      <ion-col size=\\\"2\\\" class=\\\"ion-no-padding\\\">\\n        <p class=\\\"ion-text-center icon-controls\\\">\\n          <ion-icon mode=\\\"ios\\\" name=\\\"send\\\" class=\\\"text-primary\\\" (click)=\\\"sendMsgType('text')\\\"></ion-icon>\\n        </p>\\n      </ion-col>\\n    </ion-row>\\n  </div>\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ConversationPage } from './conversation.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ConversationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ConversationPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ConversationPageRoutingModule } from './conversation-routing.module';\n\nimport { ConversationPage } from './conversation.page';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { PhotoViewer } from '@ionic-native/photo-viewer/ngx';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ConversationPageRoutingModule\n  ],\n  providers:[Camera, PhotoViewer],\n  declarations: [ConversationPage]\n})\nexport class ConversationPageModule {}\n","export default \"ion-toolbar {\\n  --border-color: transparent;\\n  align-items: center;\\n  display: flex;\\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);\\n}\\n\\nion-title {\\n  margin-left: 10px;\\n}\\n\\nion-title.lang-ar {\\n  text-align: right;\\n}\\n\\nion-title.lang-en {\\n  text-align: left;\\n}\\n\\nion-title h2 {\\n  font-weight: 500;\\n  margin: 0;\\n}\\n\\nion-back-button {\\n  color: #000;\\n}\\n\\n.contact-avatar {\\n  height: 40px;\\n  width: 40px;\\n  margin-left: 8px;\\n}\\n\\n.icon-controls ion-icon {\\n  font-size: 2rem;\\n}\\n\\nion-item {\\n  --padding-start: 0px;\\n}\\n\\n.chat-bubble {\\n  width: auto;\\n  max-width: 75%;\\n  min-width: 25%;\\n  border-radius: 25px;\\n  padding: 8px 16px;\\n  margin: 10px;\\n  display: block;\\n  clear: both;\\n  position: relative;\\n  margin-bottom: 0;\\n}\\n\\n.chat-bubble.topic {\\n  border-radius: 10px;\\n  padding: 8px;\\n}\\n\\n.chat-bubble.received {\\n  background: #F5F5F5;\\n  float: left;\\n}\\n\\n.chat-bubble.received p {\\n  color: #000 !important;\\n}\\n\\n.chat-bubble.send {\\n  background: var(--ion-color-primary);\\n  float: right;\\n  text-align: left;\\n  color: #fff;\\n  transition: all 0.3s;\\n}\\n\\n.chat-bubble .topic-details {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.chat-bubble .topic-details .topic-image img {\\n  border-radius: 10px;\\n}\\n\\n.chat-bubble.image {\\n  padding: 8px;\\n  border-radius: 10px;\\n}\\n\\n.chat-bubble.image img {\\n  border-radius: 10px;\\n}\\n\\n.chat-bubble h6 {\\n  margin: 0;\\n  font-weight: 400;\\n}\\n\\n.chat-bubble p {\\n  margin: 0;\\n  margin-top: 4px;\\n  font-size: 10px;\\n  opacity: 0.6;\\n}\\n\\n::ng-deep .my-custom-class .modal-wrapper {\\n  height: 70vh;\\n  margin-top: auto;\\n  border-top-right-radius: 33px;\\n  border-top-left-radius: 33px;\\n}\\n\\n::ng-deep .request-view-modal .modal-wrapper {\\n  max-height: 320px;\\n  min-height: -webkit-max-content;\\n  min-height: -moz-max-content;\\n  min-height: max-content;\\n  margin-top: auto;\\n  border-top-right-radius: 33px;\\n  border-top-left-radius: 33px;\\n}\\n\\n::ng-deep .swiper-pagination-bullet {\\n  width: 6px;\\n  height: 6px;\\n}\\n\\n::ng-deep .swiper-pagination-bullets {\\n  bottom: 10px !important;\\n}\\n\\n::ng-deep .swiper-pagination-bullet-active {\\n  width: 8px;\\n  height: 8px;\\n}\\n\\n@-webkit-keyframes fade {\\n  0% {\\n    opacity: 0;\\n  }\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n\\n@keyframes fade {\\n  0% {\\n    opacity: 0;\\n  }\\n  100% {\\n    opacity: 1;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29udmVyc2F0aW9uL2NvbnZlcnNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwyQkFBQTtFQUVBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLHlDQUFBO0FBQUo7O0FBR0E7RUFPSSxpQkFBQTtBQU5KOztBQUFJO0VBQ0ksaUJBQUE7QUFFUjs7QUFBSTtFQUNJLGdCQUFBO0FBRVI7O0FBRUk7RUFDSSxnQkFBQTtFQUNBLFNBQUE7QUFBUjs7QUFJQTtFQUNJLFdBQUE7QUFESjs7QUFNQTtFQUNJLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7QUFISjs7QUFPSTtFQUNJLGVBQUE7QUFKUjs7QUFTQTtFQUNJLG9CQUFBO0FBTko7O0FBU0E7RUFDSSxXQUFBO0VBQ0EsY0FBQTtFQUNBLGNBQUE7RUFDQSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7RUFDQSxXQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtBQU5KOztBQU9JO0VBQ0ksbUJBQUE7RUFDQSxZQUFBO0FBTFI7O0FBUUk7RUFDSSxtQkFBQTtFQUNBLFdBQUE7QUFOUjs7QUFPUTtFQUNJLHNCQUFBO0FBTFo7O0FBU0k7RUFDSSxvQ0FBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLFdBQUE7RUFFQSxvQkFBQTtBQVBSOztBQVVJO0VBQ0ksYUFBQTtFQUVBLHNCQUFBO0FBVFI7O0FBWVk7RUFDSSxtQkFBQTtBQVZoQjs7QUFrQkk7RUFDSSxZQUFBO0VBQ0EsbUJBQUE7QUFoQlI7O0FBa0JRO0VBQ0ksbUJBQUE7QUFoQlo7O0FBb0JJO0VBQ0ksU0FBQTtFQUNBLGdCQUFBO0FBbEJSOztBQXFCSTtFQUNJLFNBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7QUFuQlI7O0FBK0JJO0VBQ0ksWUFBQTtFQUNBLGdCQUFBO0VBQ0EsNkJBQUE7RUFDQSw0QkFBQTtBQTVCUjs7QUFpQ0k7RUFDSSxpQkFBQTtFQUNBLCtCQUFBO0VBQUEsNEJBQUE7RUFBQSx1QkFBQTtFQUNBLGdCQUFBO0VBQ0EsNkJBQUE7RUFDQSw0QkFBQTtBQTlCUjs7QUFrQ0E7RUFDSSxVQUFBO0VBQ0EsV0FBQTtBQS9CSjs7QUFrQ0E7RUFDSSx1QkFBQTtBQS9CSjs7QUFrQ0E7RUFDSSxVQUFBO0VBQ0EsV0FBQTtBQS9CSjs7QUFrQ0E7RUFDSTtJQUNJLFVBQUE7RUEvQk47RUFrQ0U7SUFDSSxVQUFBO0VBaENOO0FBQ0Y7O0FBeUJBO0VBQ0k7SUFDSSxVQUFBO0VBL0JOO0VBa0NFO0lBQ0ksVUFBQTtFQWhDTjtBQUNGIiwiZmlsZSI6InNyYy9hcHAvY29udmVyc2F0aW9uL2NvbnZlcnNhdGlvbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tdG9vbGJhciB7XG4gICAgLS1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAgIC8vaGVpZ2h0OiA2MHB4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLCAwLCAwLCAwLjE2KTtcbn1cblxuaW9uLXRpdGxlIHtcbiAgICAmLmxhbmctYXJ7XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgIH1cbiAgICAmLmxhbmctZW57XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgfVxuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuXG4gICAgaDIge1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgfVxufVxuXG5pb24tYmFjay1idXR0b24ge1xuICAgIGNvbG9yOiAjMDAwO1xufVxuXG5cblxuLmNvbnRhY3QtYXZhdGFyIHtcbiAgICBoZWlnaHQ6IDQwcHg7XG4gICAgd2lkdGg6IDQwcHg7XG4gICAgbWFyZ2luLWxlZnQ6IDhweDtcbn1cblxuLmljb24tY29udHJvbHMge1xuICAgIGlvbi1pY29uIHtcbiAgICAgICAgZm9udC1zaXplOiAycmVtO1xuICAgIH1cbn1cblxuXG5pb24taXRlbSB7XG4gICAgLS1wYWRkaW5nLXN0YXJ0OiAwcHg7XG59XG5cbi5jaGF0LWJ1YmJsZSB7XG4gICAgd2lkdGg6IGF1dG87XG4gICAgbWF4LXdpZHRoOiA3NSU7XG4gICAgbWluLXdpZHRoOiAyNSU7XG4gICAgYm9yZGVyLXJhZGl1czogMjVweDtcbiAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICBtYXJnaW46IDEwcHg7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgY2xlYXI6IGJvdGg7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgJi50b3BpY3tcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgcGFkZGluZzogOHB4O1xuICAgIH1cblxuICAgICYucmVjZWl2ZWQge1xuICAgICAgICBiYWNrZ3JvdW5kOiAjRjVGNUY1O1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgcHtcbiAgICAgICAgICAgIGNvbG9yOiAjMDAwICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAmLnNlbmQge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSk7XG4gICAgICAgIGZsb2F0OiByaWdodDtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIC4zcztcbiAgICAgICAgdHJhbnNpdGlvbjogYWxsIC4zcztcbiAgICB9XG5cbiAgICAudG9waWMtZGV0YWlscyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIC8vIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5cbiAgICAgICAgLnRvcGljLWltYWdlIHtcbiAgICAgICAgICAgIGltZyB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC50b3BpYy1jb250ZW50IHtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICYuaW1hZ2Uge1xuICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG5cbiAgICAgICAgaW1nIHtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoNiB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICB9XG5cbiAgICBwIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBtYXJnaW4tdG9wOiA0cHg7XG4gICAgICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICAgICAgb3BhY2l0eTogMC42XG4gICAgfVxufVxuXG4uY2hhdC1jb250YWluZXIge1xuICAgIC8vIGhlaWdodDogY2FsYygxMDAlIC0gNjBweCk7XG4gICAgLy8gcGFkZGluZy1ib3R0b206IDMwcHg7XG4gICAgLy8gb3ZlcmZsb3c6IHNjcm9sbDtcbn1cblxuXG46Om5nLWRlZXAgLm15LWN1c3RvbS1jbGFzcyB7XG4gICAgLm1vZGFsLXdyYXBwZXIge1xuICAgICAgICBoZWlnaHQ6IDcwdmg7XG4gICAgICAgIG1hcmdpbi10b3A6IGF1dG87XG4gICAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAzM3B4O1xuICAgICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAzM3B4O1xuICAgIH1cbn1cblxuOjpuZy1kZWVwIC5yZXF1ZXN0LXZpZXctbW9kYWwge1xuICAgIC5tb2RhbC13cmFwcGVyIHtcbiAgICAgICAgbWF4LWhlaWdodDogMzIwcHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IG1heC1jb250ZW50O1xuICAgICAgICBtYXJnaW4tdG9wOiBhdXRvO1xuICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMzNweDtcbiAgICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMzNweDtcbiAgICB9XG59XG5cbjo6bmctZGVlcCAuc3dpcGVyLXBhZ2luYXRpb24tYnVsbGV0IHtcbiAgICB3aWR0aDogNnB4O1xuICAgIGhlaWdodDogNnB4O1xufVxuXG46Om5nLWRlZXAgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldHMge1xuICAgIGJvdHRvbTogMTBweCAhaW1wb3J0YW50O1xufVxuXG46Om5nLWRlZXAgLnN3aXBlci1wYWdpbmF0aW9uLWJ1bGxldC1hY3RpdmUge1xuICAgIHdpZHRoOiA4cHg7XG4gICAgaGVpZ2h0OiA4cHg7XG59XG5cbkBrZXlmcmFtZXMgZmFkZSB7XG4gICAgMCUge1xuICAgICAgICBvcGFjaXR5OiAwO1xuICAgIH1cblxuICAgIDEwMCUge1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbn0iXX0= */\";","import { UtilService } from './../_services/util.service';\nimport { Component, OnInit, ViewChild } from '@angular/core';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { ActionSheetController, IonContent, IonInfiniteScroll, ModalController } from '@ionic/angular';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { PhotoViewer } from '@ionic-native/photo-viewer/ngx';\nimport { ApiService } from '../_services/api.service';\nimport { environment } from 'src/environments/environment';\nimport { HelperService } from '../_services/helper.service';\n\n@Component({\n  selector: 'app-conversation',\n  templateUrl: './conversation.page.html',\n  styleUrls: ['./conversation.page.scss'],\n})\nexport class ConversationPage implements OnInit {\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n  @ViewChild(IonContent, { read: IonContent, static: false }) myContent: IonContent;\n  propertyList: any = [];\n  contactInfo: any = {\n    name: 'Lisa',\n  }\n  path = environment.domain;\n  myProfile: any;\n  message: any;\n  show: boolean = false;\n  showOptions: boolean = false;\n  chatServiceConnection: any;\n  oldMsgs: any = [];\n\n  public messages = [\n  ];\n\n  image: any = '';\n  chatTo: any;\n  currentLang: any;\n\n  constructor(private camera: Camera, private modalCtrl: ModalController,\n    private actionSheetController: ActionSheetController, private photoViewer: PhotoViewer,\n    private router: Router, private route: ActivatedRoute,\n    private utilService: UtilService,\n    private helperService: HelperService,\n    private service: ApiService) {\n    this.currentLang = this.helperService.getLang();\n    //this.ScrollToBottom();\n    this.route.queryParams.subscribe(_res => {\n      this.chatTo = _res;\n      this.getChatHistory();\n      this.gtAdvisorById(this.chatTo.id, '1');\n    })\n\n    if (localStorage.getItem('currentUser')) {\n      this.myProfile = JSON.parse(localStorage.getItem('currentUser'));\n    }\n  }\n\n\n\n  ngOnInit() {\n    let self = this; \n    this.chatServiceConnection = this.utilService.chatService();\n    this.chatServiceConnection.start().then(function () {\n      console.log('connected....');\n      if (self.chatTo.topicId) {\n        //self.sendMessage('image', selectedCat.name, data.scanImageUrl, null);\n        // self.messages.push({ url: '', status: 'send', createdOn: new Date(), type: 'topic' })\n        self.getTopicById(self.chatTo.topicId);\n      }\n      if (self.chatTo.type == 'scanned') {\n        var data = JSON.parse(localStorage.getItem('scannedImage'));\n        var selectedCat = JSON.parse(localStorage.getItem('selectedCat'));\n        var extra = window.atob(localStorage.getItem('extra'));\n        console.log(selectedCat);\n        self.sendMessage('image', selectedCat.name, data.scanImageUrl, null);\n        self.messages.push({ text: self.currentLang == 'en' ? selectedCat.name : selectedCat.name_ar, url: data.scanImageUrl, status: 'send', createdOn: new Date(), type: 'image' });\n        setTimeout(() => {\n          self.sendMessage('text', extra, null, null);\n          self.messages.push({ text: extra, url: null, status: 'send', createdOn: new Date(), type: 'text' });\n        }, 100);\n        localStorage.removeItem('scannedImage');\n        localStorage.removeItem('selectedCat');\n        localStorage.removeItem('extra');\n      }\n\n      if (self.chatTo.type == 'animal') {\n        var extra = window.atob(localStorage.getItem('extra'));\n        self.messages.push({ text: extra, url: null, status: 'send', createdOn: new Date(), type: 'text' });\n        self.sendMessage('text', extra, null, null);\n        setTimeout(() => {\n          localStorage.removeItem('extra');\n        }, 100);\n      }\n\n    }).catch(function (err) {\n      console.error(err.toString());\n    });\n    this.chatServiceConnection.on(\"ReceiveMessage\", function (message) {\n      (new Audio('./assets/music/tune.mp3')).play();\n      //var msg = message.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n      self.messages.push({\n        username: message.fromUser.name,\n        text: message.message,\n        type: message.media.type,\n        createdOn: message.createdOn,\n        status: 'received'\n      });\n      self.ScrollToBottom();\n    });\n  }\n\n  ngAfterViewInit() {\n    this.infiniteScroll.disabled = true;\n  }\n\n  gtAdvisorById(id, type){\n      this.service.advisorById(id).subscribe(_res=>{\n        let chatToObj = JSON.parse(JSON.stringify(this.chatTo));\n        if(_res.data?.profilePic){\n          if(type == '1'){\n            chatToObj['profilePic'] = this.path + _res.data?.profilePic;\n          }\n          if(_res.data?.chatStatus){\n            chatToObj['isOnline'] = _res.data?.chatStatus\n          }\n          this.chatTo = chatToObj;\n        } else {\n          chatToObj['profilePic'] = '';\n          this.chatTo = chatToObj;\n        }\n     })\n  }\n\n\n  getChatHistory() {\n    var payload = {\n      \"toUserId\": this.chatTo.id,\n      \"pageFrom\": 0,\n      \"pageSize\": 10\n    };\n    this.helperService.show();\n    this.service.getChatHistory(payload).subscribe(_res => {\n      this.oldMsgs = _res;\n      this.helperService.hide();\n      this.oldMsgs.forEach(_item => {\n        _item.reverse();\n        _item.forEach(_itm => {\n          if (_itm.fromUsersId == this.myProfile.usersId) {\n            _itm.cstatus = 'send';\n          } else {\n            _itm.cstatus = 'received';\n          }\n        });\n      });\n      this.infiniteScroll.disabled = false;\n      //event.target.disabled = true;\n      this.ScrollToBottom();\n    })\n  }\n\n  getTopicById(_id) {\n    this.service.getTopicById(_id).subscribe(_res => {\n      this.messages.push({ url: _res.banner, text: this.currentLang == 'en' ? _res.title : _res.title_ar, status: 'send', createdOn: new Date(), type: 'topic' });\n      this.sendMessage('topic', 'Topic', '', _id);\n      if (this.chatTo.type == 'newchat') {\n        var extra = window.atob(localStorage.getItem('extra'));\n        setTimeout(() => {\n          this.messages.push({ text: extra, url: null, status: 'send', createdOn: new Date(), type: 'text' });\n          this.sendMessage('text', extra, null, null);\n        }, 100);\n        localStorage.removeItem('extra');\n      }\n    })\n  }\n\n  ScrollToBottom() {\n    setTimeout(() => {\n      this.myContent.scrollToBottom(300);\n    }, 100);\n  }\n\n  upload(files: FileList) {\n    let me = this;\n    let file = files[0]\n    let reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function () {\n      console.log(reader.result);\n      me.image = reader.result;\n      me.uploadImage(reader.result);\n    };\n    reader.onerror = function (error) {\n      console.log('Error: ', error);\n    };\n  }\n\n  uploadImage(_base64) {\n    var Payload = {\n      fileContent: {\n        \"base64\": _base64,\n        \"filename\": \"sample.jpeg\"\n      }\n    };\n    this.service.uploadChatImage(Payload).subscribe(_res => {\n      this.sendMessage('image', null, _res.scanImageUrl, null);\n      this.messages.push({ url: _res.scanImageUrl, status: 'send', createdOn: new Date(), type: 'image' })\n    })\n  }\n\n  sendMsgType(_type) {\n    switch (_type) {\n      case 'text':\n        var msg = this.message.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n        if(msg){\n          this.messages.push({ text: msg, status: 'send', createdOn: new Date(), type: 'text' });\n        this.message = undefined;\n        this.sendMessage('text', msg, null, null);\n        }\n        return;\n\n      case 'image':\n\n        return;\n\n      case 'text':\n\n        return;\n\n      default:\n        break;\n    }\n  }\n\n  sendMessage(_type, _msg, _url, _topic) {\n    var send = {\n      \"toUsersId\": this.chatTo.id,\n      \"message\": _msg,\n      \"transaction\": \"in\",\n      \"media\": {\n        \"type\": _type,\n        \"url\": _type == 'image' ? _url : null,\n        \"topicId\": _topic ? _topic : null\n      }\n    }\n    console.log('send', send);\n    this.chatServiceConnection.invoke('Send2User', JSON.stringify(send)).catch((err) => {\n      return console.error(err.toString());\n    });\n    this.ScrollToBottom();\n    this.gtAdvisorById(this.chatTo.id, '2');\n  }\n\n  async selectImage() {\n    const actionSheet = await this.actionSheetController.create({\n      header: \"Select Image source\",\n      buttons: [{\n        text: 'Load from Library',\n        handler: () => {\n          this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY);\n        }\n      },\n      {\n        text: 'Use Camera',\n        handler: () => {\n          this.pickImage(this.camera.PictureSourceType.CAMERA);\n        }\n      },\n      {\n        text: 'Cancel',\n        role: 'cancel'\n      }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n  pickImage(sourceType) {\n    const options: CameraOptions = {\n      quality: 100,\n      sourceType: sourceType,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      allowEdit: false\n    }\n    this.camera.getPicture(options).then((imageData) => {\n      // imageData is either a base64 encoded string or a file URI\n      //this.image = 'data:image/jpeg;base64,' + imageData;\n      var Payload = {\n        fileContent: {\n          \"base64\": 'data:image/jpeg;base64,' + imageData,\n          \"filename\": \"sample.jpeg\"\n        }\n      };\n      this.helperService.show();\n      this.service.uploadChatImage(Payload).subscribe(_res => {\n        this.helperService.hide();\n        this.sendMessage('image', null, _res.scanImageUrl, null);\n        this.messages.push({ url: _res.scanImageUrl, status: 'send', createdOn: new Date(), type: 'image' })\n      })\n      //this.image = (<any>window).Ionic.WebView.convertFileSrc(imageData);\n      console.log('image', this.image);\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  showPreview(_image) {\n\n    const options = {\n      share: false, // default is false\n      closeButton: true, // default is true\n      copyToReference: true, // default is false\n      headers: \"\",  // If it is not provided, it will trigger an exception\n      piccasoOptions: {} // If it is not provided, it will trigger an exception\n    };\n    this.photoViewer.show(decodeURIComponent(_image), '', options);\n  }\n\n  goToProfile() {\n    this.router.navigate(['/agent-profile']);\n  }\n\n  loadData(event) {\n\n    var payload = {\n      \"toUserId\": this.chatTo.id,\n      \"pageFrom\": document.getElementsByClassName('old-bubble').length,\n      \"pageSize\": 10\n    };\n\n    this.service.getChatHistory(payload).subscribe(_res => {\n      //this.oldMsgs = _res;\n      event.target.complete();\n      _res.forEach(_item => {\n        _item.reverse();\n        _item.forEach(_itm => {\n          if (_itm.fromUsersId == this.myProfile.usersId) {\n            _itm.cstatus = 'send';\n          } else {\n            _itm.cstatus = 'received';\n          }\n        });\n      });\n      this.oldMsgs.unshift(..._res);\n      //event.target.disabled = true;\n\n      if (document.getElementsByClassName('old-bubble').length < 1) {\n        this.ScrollToBottom();\n      }\n    })\n  }\n}"]}